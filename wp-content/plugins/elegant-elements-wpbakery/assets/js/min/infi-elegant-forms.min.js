!function(a){"use strict";function b(b){return!!a.trim(b).match(/^([\w-]+)@((\[[0-9]{1,3}[0-9]{1,3}[0-9]{1,3})|(([\w-]+\.)+))([a-zA-Z]{2,4}|[0-9]{1,3})(\]?)$/)}function c(c){var d,e,f=a("#"+c);a.each(f.find(".elegant-form-input"),function(){e=a(this).val(),d=a(this).attr("required"),void 0!==d&&""===e?a(this).parents(".elegant-form-field").addClass("error"):a(this).parents(".elegant-form-field").removeClass("error")}),a.each(f.find("input[data-element-id]"),function(){e=a(this).val(),d=a(this).attr("required"),void 0!==d&&""===e?a(this).parents(".elegant-form-field").addClass("error"):a(this).parents(".elegant-form-field").removeClass("error")}),a.each(f.find('input[type="email"]'),function(){e=a(this).val(),d=a(this).attr("required"),void 0===d&&""===e||b(e)?(a(this).parents(".elegant-form-field").removeClass("error"),a(this).parents(".elegant-form-field").find(".elegant-form-error").remove()):(a(this).parents(".elegant-form-field").addClass("error"),a(this).parents(".elegant-form-field").find(".elegant-form-error").length||a(this).parents(".elegant-form-field").append('<div class="elegant-form-error">'+elegantFormsConfig.invalid_email+"</div>"))})}a(window).on("load",function(){var b;a(".elegant-form-recaptcha").length&&a.each(a(".elegant-form-recaptcha"),function(){b=a(this).attr("id"),grecaptcha.render(b)})}),a(document).ready(function(c){var d,e,f,g,h,i,j,k,l,m,n=a(".elegant-form-submit");n.on("click",function(b){b.preventDefault(),a(this).parents("form.elegant-form").trigger("elegantSubmit")}),a('.elegant-form input[type="number"]').keypress(function(a){return 48<=a.charCode&&57>=a.charCode}),a(".elegant-form textarea").keypress(function(){j=a(this).val(),500<j.length?(a(this).val(j.substr(0,j.lastIndexOf(" ",500))),a(this).parents(".elegant-form-field").addClass("error"),a(this).parents(".elegant-form-field").find(".elegant-form-error").length||a(this).parents(".elegant-form-field").append('<div class="elegant-form-error">'+elegantFormsConfig.textarea_limit+"</div>")):(a(this).parents(".elegant-form-field").removeClass("error"),a(this).parents(".elegant-form-field").find(".elegant-form-error").remove())}),a('.elegant-form input[type="text"]').keypress(function(){j=a(this).val(),e=a(this).attr("required"),void 0!==e||""!==j?a(this).parents(".elegant-form-field").addClass("error"):a(this).parents(".elegant-form-field").removeClass("error")}),a('.elegant-form input[type="range"]').on("input",function(b){var c=a(this).val(),d=a(this).prev(".ui-range-slider-value");b.preventDefault(),d.val(c)}),a(".elegant-form input.ui-range-slider-value").on("change",function(b){var c=a(this).val(),d=a(this).next(".elegant-form-input");b.preventDefault(),d.val(c)}),a(".elegant-form").on("elegantSubmit",function(n){var o,p;for(n.preventDefault(),f=a(this),h=f.find(".form-button-submit").data("form-number"),i=window["elegantFormsConfig_"+h],a.each(f.find(".elegant-form-input"),function(){j=a(this).val(),e=a(this).attr("required"),void 0!==e&&""==j?a(this).parents(".elegant-form-field").addClass("error"):a(this).parents(".elegant-form-field").removeClass("error")}),a.each(f.find('input[type="email"]'),function(){j=a(this).val(),e=a(this).attr("required"),void 0===e&&""===j||b(j)?(a(this).parents(".elegant-form-field").removeClass("error"),a(this).parents(".elegant-form-field").find(".elegant-form-error").remove()):(a(this).parents(".elegant-form-field").addClass("error"),a(this).parents(".elegant-form-field").find(".elegant-form-error").length||a(this).parents(".elegant-form-field").append('<div class="elegant-form-error">'+elegantFormsConfig.invalid_email+"</div>"))}),g=f.serializeArray(),window.FormData&&(d=new FormData),k=f.find('input[type="file"]'),o=1,a.each(a(k),function(b,c){a.each(c.files,function(a,b){d.append("files["+o+"]",b),o++})}),o=0,p=g.length;o<p;o++)g[o].value=a.trim(g[o].value);d.append("formData",a.param(g)),d.append("action","elegant_form_submit_to_"+i.form_type),d.append("elegant_form_nonce",elegantFormsConfig.elegant_form_nonce),d.append("form_id",i.form_id),m={},m.post_id=elegantFormsConfig.post_id,m.success=i.success,m.error=i.error,m.field_ids=i.field_ids,m.field_labels=i.field_labels,f.find(".elegant-form-recaptcha").length&&(m.g_recaptcha_response=f.find("#g-recaptcha-response").val()),0==f.find(".error").length&&(l="url"===i.form_type?f.attr("action"):"",""!==l&&(m.url_to_submit=l),d.append("formSecureData",btoa(JSON.stringify(m))),f.find(".elegant-form-loader").html('<div class="elegant-form-working ball-pulse"><div></div><div></div><div></div></div>'),a.ajax({type:"POST",url:elegantFormsConfig.ajaxurl,data:d,dataType:"json",processData:!1,contentType:!1,success:function(a){f.find(".elegant-form-loader").html(""),a.captcha||c(f)[0].reset(),f.parents(".elegant-form-wrapper").find(".elegant-form-message-container").html(a.message)}}))}),a("body").on("click",".elegant-alert .close",function(b){b.preventDefault(),a(this).parent().slideUp()})}),a(document).ready(function(){a(".elegant-form-radio-image input").click(function(){a(this).parent().siblings().removeClass("active"),a(this).parent().addClass("active")})}),a(document).ready(function(){var b,d=a(".elegant-form-step-link"),e=a(".elegant-form-step-button"),f="",g="";e.click(function(b){b.preventDefault(),f=a(this).attr("href"),g=a(this).parents(".elegant-form-step-data").attr("id"),c(g),0==a("#"+g).find(".error").length&&a('a.elegant-form-step-link[href="'+f+'"]').trigger("click")}),d.click(function(d){d.preventDefault(),b=a(d.currentTarget),f=b.attr("href"),g=a(this).parents(".elegant-form").find(".elegant-form-step-data.active-step").attr("id"),c(g),0==a("#"+g).find(".error").length&&(b.parents(".elegant-form-steps-progress").length?a.each(b.parent("li").prevAll(),function(){var c=0,d=a(this);setTimeout(function(){d.addClass("complete-step-nav"),c+=400,setTimeout(function(){b.parent("li").addClass("active-step-nav")},c)},c)}):(b.parent("li").siblings().removeClass("active-step-nav"),b.parent("li").addClass("active-step-nav")),a.when(a(f).siblings(".elegant-form-step-data").fadeOut()).done(function(){a(f).siblings(".elegant-form-step-data").removeClass("active-step"),a(f).addClass("active-step").fadeIn()}))})})}(jQuery);